{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config/index.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/component/Html.jsx","webpack:///./src/component/provider.jsx","webpack:///./src/redux/createStore.js","webpack:///./src/routes/index.js","webpack:///./src/server/index.js","webpack:///./src/util/asyncMatchRoutes.js","webpack:///external \"babel-runtime/helpers/asyncToGenerator\"","webpack:///external \"babel-runtime/helpers/extends\"","webpack:///external \"babel-runtime/helpers/toConsumableArray\"","webpack:///external \"babel-runtime/regenerator\"","webpack:///external \"history/createBrowserHistory\"","webpack:///external \"history/createMemoryHistory\"","webpack:///external \"koa\"","webpack:///external \"koa-views\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-hot-loader\"","webpack:///external \"react-loadable\"","webpack:///external \"react-loadable/webpack\"","webpack:///external \"react-redux\"","webpack:///external \"react-router-config\"","webpack:///external \"react-router-dom\"","webpack:///external \"react-router-redux\"","webpack:///external \"redux\""],"names":["assetsPath","outPutDir","path","resolve","process","cwd","config","console","log","bundles","content","assets","style","webpackChunks","styles","key","href","push","__html","javascript","manifest","vendors","index","map","value","file","Provider","history","middleware","store","router","routerReducer","loading","error","pastDelay","retry","Main","loader","Home","About","AboutDetail","routes","component","loadData","exact","start","app","Koa","use","ctx","originalUrl","initialEntries","components","modules","moduleName","ReactDOMServer","renderToString","loadablejson","body","Loadable","preloadAll","listen","getComponents","matchComponentsArray","matchComponent","route","reduce","result","preload","res","concat","ret","getParams","match","params","pathname"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t\"server\": 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// require() chunk loading for javascript\n\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./\" + ({}[chunkId]||chunkId) + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// uncaught error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using import().catch()\n \t\t});\n \t};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server/index.js\");\n","import path from 'path';\r\nexport default {\r\n    assetsPath: '//127.0.0.1:3001/',\r\n    outPutDir: path.resolve(process.cwd(), 'dist'),\r\n}","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","import React from 'react';\r\nimport config from '../../config';\r\nimport webpackChunks from '../../dist/webpack-chunk-assets.json';\r\nconst {\r\n    assetsPath,\r\n} = config;\r\n\r\nconsole.log(assetsPath)\r\nexport default ({ bundles, content, assets }) => {\r\n    var style = [];\r\n    if(webpackChunks && webpackChunks.styles) {\r\n        for(let key in webpackChunks.styles) {\r\n            var href = `${webpackChunks.styles[key]}`\r\n            style.push(\r\n                <link\r\n                    href={href}\r\n                    key={key}\r\n                    media=\"screen, projection\"\r\n                    rel=\"stylesheet\"\r\n                    type=\"text/css\"\r\n                    charSet=\"UTF-8\"\r\n                />\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <html>\r\n            <head>\r\n                {\r\n                    style\r\n                }\r\n            </head>\r\n            <body>\r\n                <div id=\"root\" dangerouslySetInnerHTML={{__html:content}} />\r\n                {\r\n                    webpackChunks.javascript.manifest &&<script src={`${webpackChunks.javascript.manifest}`}></script>\r\n                }\r\n                {\r\n                    webpackChunks.javascript.vendors &&<script src={`${webpackChunks.javascript.vendors}`}></script>\r\n                }\r\n                {\r\n                    webpackChunks.javascript.index &&<script src={`${webpackChunks.javascript.index}`}></script>\r\n                }\r\n                {\r\n                    bundles && bundles.map(value => value && <script src={`${assetsPath}/${value.file}`}></script> )\r\n                }\r\n            </body>\r\n        </html>\r\n    )\r\n}","import { Provider } from 'react-redux';\r\n\r\nexport default Provider;","import createBrowserHistory from 'history/createBrowserHistory';\r\nimport { ConnectedRouter, routerReducer, routerMiddleware } from 'react-router-redux';\r\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\r\n\r\n\r\n\r\nexport default ({ history }) => {\r\n    const middleware = routerMiddleware(history);\r\n    const store = createStore(\r\n        combineReducers({\r\n            router: routerReducer,\r\n        }),\r\n        applyMiddleware(middleware)\r\n    );\r\n    return store;\r\n}","\r\nimport Loadable from 'react-loadable';\r\nimport React from 'react';\r\nconst loading = ({ error, pastDelay, retry }) => {\r\n    if (error) {\r\n        return <div>Error! <button onClick={retry}>Retry</button></div>;\r\n    } else if (pastDelay) {\r\n        return <div>Loading...</div>;\r\n    } else {\r\n        return null;\r\n    }\r\n    return <div>loading</div>\r\n}\r\n// import Main from '../client/main';\r\n// import Home from '../client/home';\r\n// import home from '../client/home';\r\nconst Main = Loadable({\r\n    loader: () => import('../client/main'),\r\n    loading,\r\n})\r\nconst Home = Loadable({\r\n    loader: () => import('../client/home'),\r\n    loading,\r\n});\r\n\r\n\r\nconst About = Loadable({\r\n    loader: () => import('../client/about'),\r\n    loading,\r\n});\r\n\r\nconst AboutDetail = Loadable({\r\n    loader: () => import('../client/aboutDetail'),\r\n    loading,\r\n});\r\n\r\nconst routes = [\r\n    {\r\n        component: Main,\r\n        routes: [\r\n            {\r\n                path: '/',\r\n                component: Home,\r\n                loadData: () => 1,\r\n                exact: true\r\n            },\r\n            {\r\n                path: '/about',\r\n                component: About,\r\n                routes: [\r\n                    {\r\n                        path: '/about/:id/detail',\r\n                        component: AboutDetail\r\n                    }\r\n                ]\r\n            },\r\n        ]\r\n    },\r\n    {\r\n        path: '/x',\r\n        component: Home,\r\n    }\r\n]\r\n\r\nexport default routes;","\r\n\r\n\r\n\r\nimport Koa from 'koa';\r\nimport views from 'koa-views';\r\nimport React from 'react';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport { StaticRouter } from 'react-router-dom';\r\nimport { renderRoutes } from 'react-router-config';\r\nimport asyncMatchRoutes from '../util/asyncMatchRoutes';\r\nimport routes from '../routes';\r\nimport createStore from '../redux/createStore';\r\nimport Provider from '../component/provider';\r\nimport { ConnectedRouter } from 'react-router-redux';\r\nimport createMemoryHistory from 'history/createMemoryHistory';\r\nimport Loadable from 'react-loadable';\r\nimport { getBundles } from 'react-loadable/webpack'\r\nimport loadablejson from '../../dist/react-loadable.json';\r\n// import { devMiddleware, hotMiddleware } from 'koa-webpack-middleware';\r\nimport Html from '../component/Html';\r\n\r\n// import webpackConfig from '../../webpack/webpack.config.server.babel';\r\n// import webpack from 'webpack';\r\n\r\n// const compile = webpack(webpackConfig);\r\n\r\nconst start = async () => {\r\n    const app = new Koa();\r\n    // app.use(devMiddleware(compile, {\r\n    //     // display no info to console (only warnings and errors)\r\n    //     noInfo: false,\r\n\r\n    //     // display nothing to the console\r\n    //     quiet: false,\r\n\r\n    //     // switch into lazy mode\r\n    //     // that means no watching, but recompilation on every request\r\n    //     lazy: true,\r\n\r\n    //     // watch options (only lazy: false)\r\n    //     watchOptions: {\r\n    //         aggregateTimeout: 300,\r\n    //         poll: true\r\n    //     },\r\n\r\n    //     // public path to bind the middleware to\r\n    //     // use the same as in webpack\r\n    //     publicPath: webpackConfig.output.publicPath,\r\n\r\n    //     // custom headers\r\n    //     headers: { \"X-Custom-Header\": \"yes\" },\r\n\r\n    //     // options for formating the statistics\r\n    //     stats: {\r\n    //         colors: true\r\n    //     }\r\n    // }));\r\n\r\n    // app.use(hotMiddleware(compile, {\r\n    //     // log: console.log,\r\n    //     // path: '/__webpack_hmr',\r\n    //     // heartbeat: 10 * 1000\r\n    // }));\r\n\r\n    app.use(async (ctx) => {\r\n        const {\r\n            originalUrl\r\n        } = ctx;\r\n        const history = createMemoryHistory({ initialEntries: [originalUrl] });\r\n        const { components } = asyncMatchRoutes(routes, originalUrl);\r\n\r\n        const store = createStore({ history });\r\n        const modules = [];\r\n        const component = (\r\n            <Loadable.Capture report={(moduleName) => modules.push(moduleName)}>\r\n                <Provider store={store}>\r\n                    <ConnectedRouter history={history}>\r\n                        <StaticRouter location={originalUrl} >\r\n                            {renderRoutes(routes)}\r\n                        </StaticRouter>\r\n                    </ConnectedRouter>\r\n                </Provider>\r\n            </Loadable.Capture>\r\n        );\r\n        const content = ReactDOMServer.renderToString(component);\r\n        const bundles = getBundles(loadablejson, modules);\r\n        console.log(bundles)\r\n        ctx.body = ReactDOMServer.renderToString(<Html bundles={bundles} content={content} />)\r\n    });\r\n    await Loadable.preloadAll();\r\n    app.listen(3000, () => {\r\n        console.log('Running on http://localhost:3000/');\r\n    });\r\n\r\n}\r\n\r\nstart();\r\n\r\n\r\n","import { matchRoutes } from 'react-router-config';\r\n\r\nfunction getComponents(matchComponentsArray) {\r\n  return matchComponentsArray\r\n    .map(matchComponent => matchComponent.route.component)\r\n    .reduce(async (result, component) => {\r\n      if (component.preload) {\r\n        const res = await component.preload();\r\n        const ret = [...(await result), component, ...[].concat(res)];\r\n        return ret;\r\n      }\r\n      return [...(await result), component];\r\n    }, []);\r\n}\r\n\r\nfunction getParams(match) {\r\n  return match.reduce((result, component) => {\r\n    if (component.match && component.match.params) {\r\n      return { ...result, ...component.match.params };\r\n    }\r\n    return result;\r\n  }, {});\r\n}\r\n\r\nexport default async (routes, pathname) => {\r\n  const match = matchRoutes(routes, pathname);\r\n  const params = getParams(match);\r\n  const components = await getComponents(match);\r\n\r\n  return { components, match, params };\r\n};\r\n","module.exports = require(\"babel-runtime/helpers/asyncToGenerator\");","module.exports = require(\"babel-runtime/helpers/extends\");","module.exports = require(\"babel-runtime/helpers/toConsumableArray\");","module.exports = require(\"babel-runtime/regenerator\");","module.exports = require(\"history/createBrowserHistory\");","module.exports = require(\"history/createMemoryHistory\");","module.exports = require(\"koa\");","module.exports = require(\"koa-views\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-hot-loader\");","module.exports = require(\"react-loadable\");","module.exports = require(\"react-loadable/webpack\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-config\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"react-router-redux\");","module.exports = require(\"redux\");"],"sourceRoot":""}